# Cobra CLI Command Generation Guide

## Overview

This guide shows the exact sequence of `cobra-cli` commands to generate the basic command structure for the Pitch CLI tool. **Important**: `cobra-cli` only creates the skeleton - you'll manually add flags, arguments, and functionality afterward.

---

## Step 1: Project Initialization

```bash
# Creates the main Go module with basic structure
# Generates: main.go, cmd/root.go, go.mod
cobra-cli init pitch-cli

# Navigate to the project directory
cd pitch-cli
```

**What this creates:**
- `main.go` - Entry point that calls cmd.Execute()
- `cmd/root.go` - Root command definition with basic help
- `go.mod` - Go module file

---

## Step 2: Command Generation Sequence

### Installation & Environment Management

```bash
# Complete environment setup and Ollama installation
# Will manually add: --models, --skip-hooks, --config-only
cobra-cli add install

# Complete removal with cleanup
# Will manually add: --keep-config
cobra-cli add uninstall

# Self-update system  
# Will manually add: --check-only
cobra-cli add update
```

### Core AI-Powered Git Workflow

```bash
# AI-powered commit message generation
# Will manually add: -m/--message, -p/--prompt, --dry-run, --edit, --no-verify
cobra-cli add commit

# Pull request title and description generation  
# Will manually add: <base-branch> arg, --text-only, --draft, --assignee, --labels
cobra-cli add pr

# Interactive AI consultation system
# Will manually add: [query] optional arg
cobra-cli add ask

# Automatic documentation generation
# Will manually add: --ignore, --template, --sections
cobra-cli add readme
```

### AI Model Management

```bash
# Parent command for AI model management
cobra-cli add model

# Model subcommands (note the -p modelCmd parent reference)
cobra-cli add list -p modelCmd
cobra-cli add select -p modelCmd  
cobra-cli add create -p modelCmd
cobra-cli add delete -p modelCmd

# Note: Using 'modelupdate' to avoid conflict with main 'update' command
# We'll rename this to 'update' in the code later
cobra-cli add modelupdate -p modelCmd
```

### Ollama Server Management

```bash
# Start Ollama server with progress feedback
cobra-cli add start

# Gracefully stop Ollama server
cobra-cli add stop

# Restart server with health checks  
cobra-cli add restart

# Real-time server status monitoring
cobra-cli add status
```

### Git Integration & System Info

```bash
# Git hooks installation and configuration
# Will manually add: --global
cobra-cli add apply

# System diagnostics and status dashboard
# Will manually add: --json, --health-check, --verbose
cobra-cli add info
```

---

## What Each Command Generates

After running `cobra-cli add <command>`, you get a file like `cmd/<command>.go`:

### Example: Generated Skeleton
```go
// cmd/install.go (generated by cobra-cli)
package cmd

import (
    "fmt"
    "github.com/spf13/cobra"
)

// installCmd represents the install command
var installCmd = &cobra.Command{
    Use:   "install",
    Short: "A brief description of your command",
    Long: `A longer description that spans multiple lines and likely contains
examples and usage of using your command.`,
    Run: func(cmd *cobra.Command, args []string) {
        fmt.Println("install called")
    },
}

func init() {
    rootCmd.AddCommand(installCmd)
}
```

### What You Customize It To:
```go
// cmd/install.go (after manual customization)
package cmd

import (
    "github.com/spf13/cobra"
    "pitch-cli/internal/services"
)

var (
    models     []string
    skipHooks  bool
    configOnly bool
)

var installCmd = &cobra.Command{
    Use:   "install",
    Short: "Install Ollama and setup the environment",
    Long: `Complete environment setup including Ollama installation,
AI model downloading, Git hooks setup, and system configuration.

Examples:
  pitch install
  pitch install --models llama2,codellama
  pitch install --skip-hooks --config-only`,
    Run: func(cmd *cobra.Command, args []string) {
        // Call your service layer
        err := services.Install(models, skipHooks, configOnly)
        if err != nil {
            // Handle error
        }
    },
}

func init() {
    rootCmd.AddCommand(installCmd)
    
    // Add custom flags
    installCmd.Flags().StringSliceVar(&models, "models", []string{}, "Comma-separated list of models to install")
    installCmd.Flags().BoolVar(&skipHooks, "skip-hooks", false, "Skip Git hooks installation")
    installCmd.Flags().BoolVar(&configOnly, "config-only", false, "Only setup configuration files")
}
```

---

## Command Parameters Summary

### Commands with Required Arguments
- `pitch pr <base-branch>`
- `pitch model create <name>`
- `pitch model delete <name>`
- `pitch model update <name>` (will be renamed from modelupdate)

### Commands with Optional Arguments
- `pitch ask [query]` - Interactive if no query provided

### Commands with Only Flags
All other commands use flags only (no positional arguments)

---

## Post-Generation Workflow

1. **Run all cobra-cli commands** to generate the basic structure
2. **Edit each `cmd/*.go` file** to add:
    - Proper command descriptions and examples
    - Required flags using `cmd.Flags().StringVar()`, `BoolVar()`, etc.
    - Argument validation logic
    - Calls to your service layer functions
3. **Add global flags** to `cmd/root.go`:
    - `--config` for custom config file path
    - `--verbose` for detailed output
    - `--no-color` for plain text output
4. **Rename the model update command**:
    - In `cmd/modelupdate.go`, change the `Use` field to `"update"`
    - Rename file to `cmd/model_update.go` if desired

---

## Final Project Structure

After generation and customization:

```
pitch-cli/
├── main.go                    # Entry point
├── go.mod                     # Dependencies  
├── cmd/
│   ├── root.go               # Root command + global flags
│   ├── install.go            # pitch install
│   ├── uninstall.go          # pitch uninstall  
│   ├── update.go             # pitch update
│   ├── commit.go             # pitch commit
│   ├── pr.go                 # pitch pr
│   ├── ask.go                # pitch ask
│   ├── readme.go             # pitch readme
│   ├── model.go              # pitch model
│   ├── list.go               # pitch model list
│   ├── select.go             # pitch model select
│   ├── create.go             # pitch model create
│   ├── delete.go             # pitch model delete
│   ├── modelupdate.go        # pitch model update
│   ├── start.go              # pitch start
│   ├── stop.go               # pitch stop
│   ├── restart.go            # pitch restart
│   ├── status.go             # pitch status
│   ├── apply.go              # pitch apply
│   └── info.go               # pitch info
└── internal/                 # Your service layer (add manually)
    ├── services/
    ├── config/
    └── ui/
```

This gives you a complete CLI skeleton that recognizes all commands and can be incrementally implemented feature by feature!